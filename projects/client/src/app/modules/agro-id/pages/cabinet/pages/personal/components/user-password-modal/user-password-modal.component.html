<!-- USER NAME -->
<nz-modal
  [(nzVisible)]="isVisible"
  (nzOnCancel)="handleCancel()"
>
  <form nz-form nzLayout="vertical" [formGroup]="validateForm">
    <div *nzModalTitle>
      <h4 nz-typography>Изменить пароль</h4>
    </div>
    <ng-container *nzModalContent>

      <nz-form-item>
        <nz-form-label [nzSm]="24" [nzXs]="24" nzFor="password" class="text-start" nzRequired>Введите новый пароль</nz-form-label>
        <nz-form-control [nzSm]="24" [nzXs]="24" nzErrorTip="Please input your password!">
          <nz-input-group [nzSuffix]="suffixTemplate">
            <input
            nz-input
            [type]="passwordVisible ? 'text' : 'password'"
            id="password"
            nzSize="large"
            formControlName="password"
            (ngModelChange)="updateConfirmValidator()"
            [(ngModel)]="password"
            />
          </nz-input-group>
          <ng-template #suffixTemplate>
            <i nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'" (click)="passwordVisible = !passwordVisible"></i>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSm]="24" [nzXs]="24" nzFor="checkPassword" class="text-start" nzRequired>Повторите новый пароль</nz-form-label>
        <nz-form-control [nzSm]="24" [nzXs]="24" [nzErrorTip]="errorTpl">
          <nz-input-group [nzSuffix]="confirmSuffixTemplate">
            <input nz-input [type]="confirmPasswordVisible ? 'text' : 'password'" formControlName="checkPassword" nzSize="large" id="checkPassword" [(ngModel)]="confirmPassword"/>
            <ng-template #errorTpl let-control>
              <ng-container *ngIf="control.hasError('required')">Please confirm your password!</ng-container>
              <ng-container *ngIf="control.hasError('confirm')">
                Two passwords that you enter is inconsistent!
              </ng-container>
            </ng-template>
            <ng-template #confirmSuffixTemplate>
              <i nz-icon [nzType]="confirmPasswordVisible ? 'eye-invisible' : 'eye'" (click)="confirmPasswordVisible = !confirmPasswordVisible"></i>
            </ng-template>
          </nz-input-group>
          
         
        </nz-form-control>
      </nz-form-item>

    </ng-container>

    <div *nzModalFooter nz-row nzGutter="10">
      
      <div nz-col nzSpan="24">
        <button
          class="font-agro-medium"
          nzBlock
          nz-button
          nzType="primary"
          nzShape="round"
          (click)="submitForm()"
          [nzLoading]="isConfirmLoading"
        >
          Сохранить
        </button>
      </div>
    </div>
  </form>
</nz-modal>


<az-success-changes [config]="{type: 'Изменение пароля', description: 'Ваш пароль успешно изменен!', isVisible: isSuccess}" (handleSuccess)="handleSuccess($event)"></az-success-changes>