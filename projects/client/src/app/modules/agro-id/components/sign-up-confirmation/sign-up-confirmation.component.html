<div class="confirm-text">
  <h3 class="agro-id-form-title">{{ "confirmation" | translate }}</h3>
  <p nz-typography nzType="secondary">
    {{
      (data?.byPhoneNumber
        ? "confirmationDescriptionPhone"
        : "confirmationDescriptionEmail"
      ) | translate: { value: data?.login }
    }}
    <span nz-typography nzType="warning" *ngIf="$leftSeconds | async"
      >{{ "confirmTimer" | translate }}
      {{ $leftSeconds | async | date: "mm:ss" }}</span
    >
  </p>
</div>

<nz-divider class="divider-custom-top"></nz-divider>
<div nz-row>
  <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="20" nzXl="20">
    <div></div>
    <form
      nz-form
      class="confirm-form"
      nzLayout="horizontal"
      [formGroup]="confirmationForm"
    >
      <!-- ERRORS FROM SERVER -->
      <div class="mb-1">
        <error-from-server
          *ngIf="errorMessageFromServer"
          [error]="errorMessageFromServer"
        ></error-from-server>
      </div>

      <div nz-row>
        <div
          nz-col
          nzFlex="2"
          class="activation-code"
          *ngFor="let index of [1, 2, 3, 4, 5]"
        >
          <nz-form-item nz-row>
            <nz-form-control nz-col class="confirm-control">
              <input
                maxlength="1"
                id="activationCode{{ index }}"
                formControlName="activationCode{{ index }}"
                (ngModelChange)="setFocus(index)"
                (keydown.backspace)="backspace(index)"
                nz-input
                class="confirm-input"
                type="text"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <!-- Ask activation code again -->
      <div *ngIf="($leftSeconds | async) === 0">
        <ng-template #indicatorTemplate>
          <i
            nz-icon
            nzType="loading"
            *ngIf="$isWaitingActivationCodeResponse | async"
          ></i>
          <a
            (click)="askActivationCodeAgain()"
            [textContent]="'getConfirmCodeAgain' | translate"
          ></a>
        </ng-template>
        <nz-spin nzSimple [nzIndicator]="indicatorTemplate"></nz-spin>
      </div>

      <!-- Send activation code -->
      <div>
        <button
          nzBlock
          nz-button
          class="confirm-btn font-agro-medium"
          nzType="primary"
          [disabled]="!confirmationForm.valid"
          [nzLoading]="$isWaitingResponse | async"
          (click)="confirmPasscode()"
        >
          {{ "confirm" | translate }}
        </button>
      </div>
    </form>
    <div nz-col nzXs="0" nzSm="0" nzMd="0" nzLg="2" nzXl="2"></div>
    <div nz-col nzXs="0" nzSm="0" nzMd="0" nzLg="2" nzXl="2"></div>
  </div>
</div>
