<!-- <button nz-button nzType="primary" routerLink="agro-id">Agro Id</button>
<button nz-button nzType="primary" routerLink="market">Market</button>
<button nz-button nzType="primary" routerLink="online-consultant">Online consultant</button> -->

<div class="header" (window:resize)="onResize()">
  <nav class="nav">
    <div class="container">
      <div nz-row>
        <div nz-col nzSpan="24" class="nav__top">
          <div nz-row nzAlign="middle">
            <div nz-col nzXs="0" nzSm="0" nzMd="0" nzLg="0" nzXl="12">
              <ul class="nav__menu" nz-row>
                <li nz-col class="nav__menu-item">
                  <a [routerLink]="'about'">О проекте</a>
                </li>
                <li nz-col class="nav__menu-item">
                  <a [routerLink]="'faq'">Помощь</a>
                </li>
                <li nz-col class="nav__menu-item">
                  <span class="link-divider"></span>
                </li>
                <li nz-col class="nav__menu-item">
                  <a>Банковские продукты</a>
                </li>
                <li nz-col class="nav__menu-item"><a>Онлайн консультант</a></li>
              </ul>
            </div>
            <div nz-col nzXs="0" nzSm="0" nzMd="0" nzLg="0" nzXl="9">
              <div nz-row nzAlign="middle" [nzGutter]="[24, 0]" nzJustify="end">
                <div nz-col class="nav__currency text-end">
                  <i class="red" nz-icon nzType="fall" nzTheme="outline"></i>
                  <span nz-typography>USD 10 677.66</span>
                </div>
                <div nz-col class="nav__weather">
                  <img
                    width="20"
                    src="./assets/images/agrozamin/sun-svg.svg"
                    alt="weather-icon"
                  />
                  <span nz-typography>27 °C</span>
                </div>
              </div>
            </div>
            <div
              nz-col
              nzXs="0"
              nzSm="0"
              nzMd="0"
              nzLg="0"
              nzXl="3"
              class="ml-a"
            >
              <div nz-row>
                <div nz-col nzSpan="24" class="text-end">
                  <span nz-typography class="select-desc">Язык:</span>
                  <nz-select
                    [(ngModel)]="lang"
                    nzBorderless
                    class="nav__select"
                    style="padding-right: 0"
                    [nzDropdownMatchSelectWidth]="false"
                    [nzOptionHeightPx]="35"
                  >
                    <nz-option nzCustomContent nzValue="2" nzLabel="Ўзбекча">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/uzbekistan-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">Ўзбекча</span>
                      </div>
                    </nz-option>
                    <nz-option nzCustomContent nzValue="3" nzLabel="O'zbekcha">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/uzbekistan-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">O'zbekcha</span>
                      </div>
                    </nz-option>
                    <nz-option nzCustomContent nzValue="1" nzLabel="Русский">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/russia-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">Русский</span>
                      </div>
                    </nz-option>
                    <nz-option nzCustomContent nzValue="4" nzLabel="English">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/english-uk-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">English</span>
                      </div>
                    </nz-option>
                  </nz-select>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div nz-col nzSpan="24" class="nav__middle">
          <div nz-row nzAlign="middle">
            <div nz-col nzXs="22" nzSm="14" nzMd="12" nzLg="8" nzXl="9">
              <a [routerLink]="'./'">
                <img src="./assets/images/agrozamin/logo.svg" alt="logo" />
              </a>
            </div>
            <div
              nz-col
              nzXs="0"
              nzSm="0"
              nzMd="0"
              nzLg="11"
              [nzXl]="!isAuth ? 8 : 11"
            >
              <div nz-row [nzGutter]="[24, 0]" nzJustify="end">
                <div nz-col class="nav__contacts">
                  <a href="tel:998781500088"
                    ><img
                      src="./assets/images/agrozamin/phone-icon.svg"
                      alt="icon"
                    /><span nz-typography>(78) 150–00–88</span></a
                  >
                </div>
                <div nz-col class="nav__contacts">
                  <a
                    ><img
                      src="./assets/images/agrozamin/chat-icon.svg"
                      alt="icon"
                    /><span nz-typography>On-line чат</span></a
                  >
                </div>
              </div>
            </div>

            <div
              nz-col
              nzXs="0"
              nzSm="0"
              nzMd="0"
              nzLg="0"
              [nzXl]="!isAuth ? 7 : 4"
            >
              <div nz-row [nzGutter]="[8, 0]" nzJustify="end">
                <div nz-col>
                  <button
                    nz-button
                    nzType="default"
                    nzSize="large"
                    nz-popover
                    nzPopoverTrigger="click"
                    [nzPopoverContent]="contentTemplate"
                    nzPopoverPlacement="bottomRight"
                  >
                    <i
                      ><img
                        src="./assets/images/agrozamin/services-icon.svg"
                        alt="icon"
                    /></i>
                  </button>
                </div>

                <div nz-col *ngIf="isAuth">
                  <button
                    nz-button
                    nzType="default"
                    nzSize="large"
                    (click)="isAuth = !isAuth"
                  >
                    <i nz-icon nzType="user" nzTheme="outline"></i>
                    Войти
                  </button>
                </div>

                <div nz-col *ngIf="!isAuth">
                  <nz-button-group>
                    <button
                      nz-button
                      nzType="default"
                      nzSize="large"
                      (click)="isAuth = !isAuth"
                      class="ava-btn"
                      *ngIf="profileImage"
                    >
                    <img [src]="'../../../../assets/images/agrozamin/ava.jpg'" alt="ava-btn">
                    </button>
                    <button
                      nz-button
                      nzType="default"
                      nzSize="large"
                      (click)="isAuth = !isAuth"
                      class="ava-btn"
                      *ngIf="!profileImage"
                    >
                    <i nz-icon nzType="user" nzTheme="outline"></i>
                    </button>
                    <button
                      nz-button
                      nzType="default"
                      nzSize="large"
                      (click)="isAuth = !isAuth"
                    >
                      Джаллолиддин Мангуберды
                    </button>
                  </nz-button-group>
                </div>
              </div>
            </div>

            <div nz-col nzXs="0" nzSm="8" nzMd="10" nzLg="4" nzXl="0">
              <div nz-row>
                <div nz-col nzSpan="24" class="text-end">
                  <span nz-typography class="select-desc">Язык:</span>
                  <nz-select
                    [(ngModel)]="lang"
                    nzBorderless
                    class="nav__select"
                    style="padding-right: 0"
                    [nzDropdownMatchSelectWidth]="false"
                    [nzOptionHeightPx]="35"
                  >
                    <nz-option nzCustomContent nzValue="2" nzLabel="Ўзбекча">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/uzbekistan-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">Ўзбекча</span>
                      </div>
                    </nz-option>
                    <nz-option nzCustomContent nzValue="3" nzLabel="O'zbekcha">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/uzbekistan-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">O'zbekcha</span>
                      </div>
                    </nz-option>
                    <nz-option nzCustomContent nzValue="1" nzLabel="Русский">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/russia-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">Русский</span>
                      </div>
                    </nz-option>
                    <nz-option nzCustomContent nzValue="4" nzLabel="English">
                      <div class="nav__select__option">
                        <img
                          src="./assets/images/agrozamin/english-uk-flag.png"
                          alt=""
                        />
                        <span style="margin-left: 8px">English</span>
                      </div>
                    </nz-option>
                  </nz-select>
                </div>
              </div>
            </div>
            <div
              nz-col
              nzXs="2"
              nzSm="2"
              nzMd="2"
              nzLg="1"
              nzXl="0"
              class="text-end"
            >
              <button
                nz-button
                nzType="default"
                nzSize="large"
                (click)="openAz()"
              >
                <i
                  ><img
                    src="./assets/images/agrozamin/header-burger.svg"
                    alt="burger"
                /></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- <nz-divider style="margin: 19px 0 16px 0"></nz-divider>
    <div class="container">
      <div nz-row class="nav__bottom" [nzGutter]="[16, 0]">
        <div nz-col>
          <button nz-button nzType="primary" nzSize="large" (click)="open()">
            <i
              ><img
                src="./assets/images/agrozamin/catalog.svg"
                alt="icon"
            /></i>
            <span class="nav__bottom-btn-text">Каталог</span>
          </button>
        </div>
        <div nz-col nzFlex="auto">
            <form nz-form [formGroup]="searchForm" (ngSubmit)="submit()">
                <nz-input-group
                nzSize="large"
                nzCompact
                nzSearch
                [nzAddOnAfter]="suffixIconButton"
              >
                <input
                  type="text"
                  nz-input
                  nzSize="large"
                  style="width: 70%"
                  placeholder="Найти среди 273 000 обьявлений"
                  formControlName="searchInput"
                  (click)="openSearchDrop()"
                />
                <nz-input-group
                  style="width: 30%"
                  nzSize="large"
                  [nzSuffix]="arrowIcon"
                  [nzPrefix]="locationIcon"
                >
                  <input
                    type="text"
                    nz-input
                    nzSize="large"
                    placeholder="Весь Узбекистан"
                    (click)="touched = true"
                    formControlName="cityInput"
                    (click)="openFilterDrop()"
                  />
                </nz-input-group>
              </nz-input-group>
    
              <ng-template #locationIcon
                ><i
                  nz-icon
                  nzType="environment"
                  nzTheme="outline"
                  [ngStyle]="{ color: touched ? '#1A1A1A' : '#999999' }"
                ></i
              ></ng-template>
    
              <ng-template #arrowIcon>
                <i
                  nz-icon
                  nzType="down"
                  nzTheme="outline"
                  [ngStyle]="{ color: touched ? '#1A1A1A' : '#999999' }"
                ></i>
              </ng-template>
    
              <ng-template #suffixIconButton>
                <button nz-button nzType="primary" nzSearch nzSize="large" (click)="searchDropDown = false; searchCityDropDown = false">
                  <i nz-icon nzType="search"></i>
                </button>
              </ng-template>
    
              <ng-template #arrowTemplate>
                <i nz-icon nzType="down" nzTheme="outline"></i>
              </ng-template>
            </form>
          
        </div>
        <div nz-col>
          <button nz-button nzType="primary" nzSize="large">
            <i nz-icon nzType="plus-circle" nzTheme="outline"></i>
            <span>Подать объявление</span>
          </button>
        </div>
      </div>
    </div> -->
  </nav>

  <!--  <div class="header__search-dropdown" *ngIf="searchDropDown">
      <div class="drop-top">
        <div class="container">
            <div class="header__dropdown">
              <div nz-row [nzGutter]="[0, 30]">
  
                  <div nz-col nzSpan="24" *ngFor="let param of searchParamas">
                      <div nz-row [nzGutter]="[30, 0]">
                          <div nz-col nzSpan="3">
                              <p nz-typography class="text-end search__type">{{param.type}}</p>
                          </div>
                          <div nz-col nzSpan="21">
                              <div nz-row>
                                  <div nz-col nzSpan="24" *ngFor="let value of param.values">
                                      <a class="search__values">{{value.name}}</a>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>                
              </div>
            </div>
        </div>
      </div>
      <div class="backdrop"></div>
  </div>


  <div class="header__search-dropdown" *ngIf="searchCityDropDown">
      <div class="drop-top">
        <div class="container">
            <div class="header__dropdown">
              <div nz-row [nzGutter]="[0, 30]">
                  <div nz-col nzSpan="12">
                      <input nz-input type="text" placeholder="Поиск по названию" nzSize="large" [(ngModel)]="search">                        
                  </div>            
                  <div nz-col nzSpan="24">
                    <div nz-row [nzGutter]="[30, 0]">

                      <div nz-col nzSpan="6" class="regions_border">
                          <div nz-row [nzGutter]="[0, 16]">
                                <div nz-col nzSpan="24" *ngFor="let region of regions | filter: search">
                                  <a class="region" (mouseenter)="getCities(region.id)">{{region.name}}</a>
                                </div>
                            </div>
                      </div>

                      <div nz-col nzSpan="18" *ngIf="search.length < 1">
                        <div nz-row [nzGutter]="[0, 16]">
                          <div nz-col nzSpan="8" *ngFor="let city of regionsChild | filter: search">
                            <a class="city">{{city.name}}</a>
                          </div>
                        </div>
                      </div>

                      <div nz-col nzSpan="18" *ngIf="search.length > 0">
                        <div nz-row [nzGutter]="[0, 16]">
                          <div nz-col nzSpan="8" *ngFor="let city of regionsChild | filter: search">
                            <a class="city">{{city.name}}</a>
                          </div>
                        </div>
                      </div>
                      
                    </div>
                  </div>            
              </div>
            </div>
        </div>
      </div>
      <div class="backdrop"></div>
  </div> -->
</div>

<!-- DRAWER -->
<!-- <nz-drawer
  [nzClosable]="false"
  [nzVisible]="visible"
  nzPlacement="left"
  (nzOnClose)="close()"
  [nzWidth]="calcDrawerWidth()"
>
  <ng-container *nzDrawerContent>
    <div class="drawer-block">
      <div nz-row class="drawer">
        <div nz-col class="menu" nzFlex="280px">
          <h4 class="menu__title">Каталог товаров</h4>
          <ul class="menu__list">
            <li
              class="menu__item"
              *ngFor="let category of categories"
              (mouseenter)="getChild(category.id)"
            >
              <a
                class="menu__link"
                (mouseenter)="openSubmenu(category.id)"
                [ngClass]="activeLink === category.id ? 'active' : ''"
              >
                <img width="30" height="25" [src]="category.icon" alt="icon" />
                <span class="menu__link-text">{{ category.name }}</span>
                <i nz-icon nzType="right" nzTheme="outline"></i>
              </a>
            </li>
          </ul>
        </div>
        <div class="submenu" *ngIf="isOpened" nz-col nzFlex="auto">
          <div nz-row [nzGutter]="[10, 0]">
            <div nz-col nzSpan="18">
              <div nz-row [nzGutter]="[20, 20]">
                <div
                  nz-col
                  nzSpan="8"
                  *ngFor="let subcategory of categoryChilds"
                >
                  <ul>
                    <li>
                      <a class="submenu__title" href="">{{
                        subcategory.name
                      }}</a>
                      <ul class="submenu__list">
                        <li
                          class="submenu__item"
                          *ngFor="let child of subcategory.categories"
                        >
                          <a href="" class="submenu__link"
                            ><span>{{ child.name }}</span></a
                          >
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div nz-col nzSpan="6">
              <div nz-row [nzGutter]="[0, 30]">
                <div nz-col nzSpan="24">
                  <div class="adv">
                    <a
                      ><img
                        src="./assets/images/agrozamin/drawer-adv-1.jpg"
                        alt="adv"
                    /></a>
                  </div>
                </div>
                <div nz-col nzSpan="24">
                  <div class="adv">
                    <a
                      ><img
                        src="./assets/images/agrozamin/drawer-adv-2.jpg"
                        alt="adv"
                    /></a>
                  </div>
                </div>
              </div>
              
              
            </div>
          </div>
        </div>
        <div
          [ngClass]="isOpened ? 'close-btn-right' : 'close-btn'"
          nz-col
          nzFlex="20px"
        >
          <button
            nz-button
            nzType="default"
            nzGhost
            nzShape="circle"
            nzSize="large"
            (click)="close()"
          >
            <i nz-icon nzType="close" nzTheme="outline"></i>
          </button>
        </div>
      </div>
    </div>
  </ng-container>
</nz-drawer>
 -->

<nz-drawer
  [nzClosable]="false"
  [nzVisible]="azVisible"
  nzPlacement="right"
  [nzWidth]="azDrawerWidthValue"
>
  <ng-container *nzDrawerContent>
    <div class="az-drawer">
      <div nz-row [nzGutter]="[0, 0]">
        <div nz-col nzSpan="24">
          <div class="az-drawer_padding top">
            <div nz-row nzJustify="space-between">
              <div nz-col>
                <button
                  nz-button
                  nzType="default"
                  nzSize="large"
                  (click)="isAuth = !isAuth"
                >
                  <i nz-icon nzType="user" nzTheme="outline"></i>
                  {{ isAuth ? "Профиль" : "Войти" }}
                </button>
              </div>
              <div nz-col>
                <button
                  nz-button
                  nzType="default"
                  nzSize="large"
                  (click)="closeAz()"
                >
                  <i nz-icon nzType="close" nzTheme="outline"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div nz-col nzXs="24" nzSm="0">
          <div class="az-drawer__language">
            <p nz-typography class="az-drawer__language__title">Язык</p>

            <div nz-row [nzGutter]="[20, 20]">
              <div nz-col nzSpan="12">
                <button
                  nzBlock
                  nz-button
                  nzType="default"
                  [disabled]="'2' === lang"
                  (click)="setLang('2')"
                >
                  Ўзбекча
                </button>
              </div>
              <div nz-col nzSpan="12">
                <button
                  nzBlock
                  nz-button
                  nzType="default"
                  [disabled]="'3' === lang"
                  (click)="setLang('3')"
                >
                  O'zbekcha
                </button>
              </div>
              <div nz-col nzSpan="12">
                <button
                  nzBlock
                  nz-button
                  nzType="default"
                  [disabled]="'1' === lang"
                  (click)="setLang('1')"
                >
                  Русский
                </button>
              </div>
              <div nz-col nzSpan="12">
                <button
                  nzBlock
                  nz-button
                  nzType="default"
                  [disabled]="'4' === lang"
                  (click)="setLang('4')"
                >
                  English
                </button>
              </div>
            </div>
          </div>
        </div>

        <div nz-col nzSpan="24">
          <div class="az-drawer_padding">
            <p nz-typography class="az-drawer__title">
              Другие площадки экосистемы
            </p>

            <div nz-row [nzGutter]="[0, 20]">
              <div nz-col *ngFor="let service of services" nzSpan="24">
                <div nz-row nzAlign="middle" [nzGutter]="[16, 0]">
                  <div nz-col>
                    <div class="az-drawer__service-image">
                      <img [src]="service.logo" alt="service logo" />
                    </div>
                  </div>
                  <div nz-col>
                    <h6 nz-typography class="az-drawer__service-name">
                      {{ service.name }}
                    </h6>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <nz-divider class="divider"></nz-divider>
        <div nz-col nzSpan="24">
          <div class="az-drawer_padding">
            <ul nz-row [nzGutter]="[0, 20]">
              <li nz-col nzSpan="24">
                <a nz-button nzType="link" class="az-drawer__link">
                  <i nz-icon nzType="info-circle" nzTheme="outline"></i>
                  <span>О проекте</span>
                </a>
              </li>
              <li nz-col nzSpan="24">
                <a nz-button nzType="link" class="az-drawer__link">
                  <i nz-icon nzType="question-circle" nzTheme="outline"></i>
                  <span>Помощь</span>
                </a>
              </li>
              <li nz-col nzSpan="24">
                <a nz-button nzType="link" class="az-drawer__link">
                  <i nz-icon nzType="bank" nzTheme="outline"></i>
                  <span>Банковские продукты</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <nz-divider class="divider"></nz-divider>
        <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="0">
          <div class="az-drawer_padding bot">
            <div nz-row [nzGutter]="[0, 30]">
              <div nz-col nzSpan="24">
                <a href="tel:998781500088" class="az-drawer__contacts"
                  ><img
                    src="./assets/images/agrozamin/phone-icon.svg"
                    alt="icon"
                  /><span nz-typography>(78) 150–00–88</span></a
                >
              </div>
              <div nz-col nzSpan="24">
                <a class="az-drawer__contacts"
                  ><img
                    src="./assets/images/agrozamin/chat-icon.svg"
                    alt="icon"
                  /><span nz-typography>On-line чат</span></a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</nz-drawer>

<!-- SERVICES POPUP -->

<ng-template #contentTemplate>
  <div class="agrozaminEkoSystem">
    <div nz-row class="agrozaminEkoSystem__container">
      <div class="agrozaminEkoSystem__container__head" nz-col nzSpan="19">
        <h3>Экосистема Agrozamin</h3>
        <p>
          Технологии для развития сельского хозяйства в едином цифровом
          пространстве
        </p>
        <h6>Другие площадки экосистемы</h6>
      </div>
      <div
        class="agrozaminEkoSystem__container__body"
        *ngFor="let index of agrozaminEkoSystem; let isLast = last"
        nz-col
        nzSpan="24"
      >
        <div nz-row [nzGutter]="[20, 0]" nzAlign="middle">
          <div
            nz-col
            nzSpan="6"
            class="agrozaminEkoSystem__container__body__img"
          >
            <div>
              <img [src]="index.img" alt="" />
            </div>
          </div>
          <div nz-col nzSpan="18">
            <div
              class="agrozaminEkoSystem__container__body__text"
              nz-row
              [nzGutter]="[0, 8]"
            >
              <div nz-col nzSpan="24">
                <h3>{{ index.title }}</h3>
              </div>
              <div nz-col nzSpan="24">
                <p>{{ index.description }}</p>
              </div>
            </div>
          </div>
        </div>
        <nz-divider *ngIf="!isLast"></nz-divider>
      </div>
    </div>
  </div>
</ng-template>
