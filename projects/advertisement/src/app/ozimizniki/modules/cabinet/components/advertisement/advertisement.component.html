<div nz-row [nzGutter]="[0, 20]">
  <div nz-col nzSpan="24">
    <div class="sort">
      <div
        nz-row
        nzAlign="middle"
        nzJustify="space-between"
        [nzGutter]="[0, { xs: 10, sm: 10, md: 10, lg: 0, xl: 0 }]"
      >
        <div nz-col class="sort__left">
          <div nz-row [nzGutter]="[8, 0]">
            <div nz-col nzXs="0" nzSm="0" nzMd="0" nzLg="0" nzXl="7">
              <span class="sort__variable">Сортировать:</span>
            </div>
            <div nz-col>
              <a class="sort__link"
                ><span>По цене</span
                ><img src="/assets/images/sort.png" alt="sort icon"
              /></a>
            </div>
            <div nz-col>
              <a class="sort__link"
                ><span>По дате</span
                ><img src="/assets/images/sort.png" alt="sort icon"
              /></a>
            </div>
          </div>
        </div>
        <div nz-col class="sort__right">
          <div
            nz-row
            [nzGutter]="[20, { xs: 10, sm: 10, md: 0, lg: 0, xl: 0 }]"
          >
            <div nz-col>
              <nz-select
                nzShowSearch
                nzAllowClear
                nzPlaceHolder="Все категории"
                nzSize="large"
                [(ngModel)]="categoryId"
                (ngModelChange)="onChangeCategoryFilter()"
              >
                <nz-option
                  [nzValue]="category.id"
                  [nzLabel]="category.name"
                  *ngFor="let category of categories"
                ></nz-option>
              </nz-select>
            </div>
            <div nz-col>
              <nz-select
                nzShowSearch
                nzAllowClear
                nzPlaceHolder="Все типы объявлений"
                nzSize="large"
                [(ngModel)]="advertisementTypeId"
                (ngModelChange)="onChangeAdvertisementTypeFilter()"
                [nzDropdownMatchSelectWidth]="false"
              >
                <nz-option
                  [nzValue]="advertisementType.id"
                  [nzLabel]="advertisementType.name"
                  *ngFor="let advertisementType of advertisementTypes"
                ></nz-option>
              </nz-select>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-container *ngIf="data">
    <div
      *ngFor="let advert of data.data"
      nz-col
      nzXs="24"
      nzSm="24"
      nzMd="24"
      nzLg="24"
      nzXl="24"
    >
      <div class="advert-cards" nz-row>
        <div nz-col nzXs="6" nzSm="6" nzMd="8" nzLg="7" nzXl="6">
          <div class="advert-cards__top">
            <div class="advert-cards__top__img">
              <img [src]="advert?.file?.file | noImage" alt="card img" />
            </div>
            <div class="advert-cards__top__info">
              <div nz-row nzAlign="middle">
                <div nz-col nzXs="0" nzSm="0" nzMd="18" nzLg="18" nzXl="18">
                  <span
                    class="tag {{ advert.category_id | classByCategoryId }}"
                  >
                    {{ advert.category.name }}
                  </span>
                </div>
                <div nz-col nzXs="0" nzSm="0" nzMd="6" nzLg="6" nzXl="6">
                  <button nz-button nzType="text" class="advert-cards__icon">
                    <i
                      style="font-size: 24px"
                      [nzTheme]="'twotone'"
                      nz-icon
                      nzType="heart"
                    ></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          nz-col
          nzXs="12"
          nzSm="12"
          nzMd="11"
          nzLg="11"
          nzXl="12"
          class="advert-cards__content"
        >
          <div nz-row>
            <div nz-col nzSpan="24">
              <div nz-row>
                <div nz-col nzSpan="24" class="advert-cards__content__title">
                  <h3>{{ advert.name }}</h3>
                </div>
                <div
                  nz-col
                  nzXs="0"
                  nzSm="0"
                  nzMd="0"
                  nzLg="0"
                  nzXl="24"
                  class="advert-cards__content__description"
                >
                  <p>
                    {{ advert.description }}
                  </p>
                </div>
              </div>
            </div>
            <div nz-col nzSpan="24" class="advert-cards__content__price">
              <h3>{{ advert.price | azCurrency }}</h3>
            </div>

            <div
              class="advert-cards__content__companyDirector"
              nz-col
              nzXs="24"
              nzSm="24"
              nzMd="24"
              nzLg="24"
              nzXl="0"
            >
              <div nz-row [nzGutter]="[6, 0]">
                <div nz-col>
                  <img src="/assets/images/house.png" alt="" />
                </div>
                <div nz-col>
                  <h4>Жахонгир Пардаев</h4>
                </div>
              </div>
            </div>
            <div
              class="advert-cards__content__companyLocation"
              nz-col
              nzXs="24"
              nzSm="24"
              nzMd="24"
              nzLg="24"
              nzXl="0"
            >
              <div nz-row>
                <div nz-col nzXs="2" nzSm="2" nzMd="2" nzLg="1">
                  <img src="/assets/images/location.svg" alt="" />
                </div>
                <div nz-col nzXs="22" nzSm="22" nzMd="22" nzLg="23">
                  <h5>Ташкентская область, город Ташкент</h5>
                </div>
              </div>
            </div>

            <div
              nz-col
              nzXs="8"
              nzSm="8"
              nzMd="0"
              nzLg="0"
              nzXl="0"
              style="padding-top: 5px"
            >
              <div nz-row [nzGutter]="[3, 0]">
                <div nz-col>
                  <img
                    src="./assets/images/o'zimizniki-Vector (2).png"
                    alt=""
                  />
                </div>
                <div
                  class="advert-cards__rightContent__text"
                  nz-col
                  nzXs="8"
                  nzSm="8"
                  nzMd="0"
                  nzLg="0"
                  nzXl="0"
                >
                  <span>352</span>
                </div>
              </div>
            </div>

            <div
              nz-col
              nzXs="8"
              nzSm="8"
              nzMd="0"
              nzLg="0"
              nzXl="0"
              style="padding-top: 5px"
            >
              <div nz-row [nzGutter]="[3, 0]">
                <div nz-col>
                  <img src="./assets/images/o'zimizniki-Vector1.png" alt="" />
                </div>
                <div class="advert-cards__rightContent__text" nz-col>
                  <span>25</span>
                </div>
              </div>
            </div>

            <div
              nz-col
              nzXs="8"
              nzSm="8"
              nzMd="0"
              nzLg="0"
              nzXl="0"
              style="padding-top: 5px"
            >
              <div nz-row [nzGutter]="[3, 0]">
                <div nz-col>
                  <img src="./assets/images/o'zimizniki-phone.png" alt="" />
                </div>
                <div class="advert-cards__rightContent__text" nz-col>
                  <span>16</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          nz-col
          nzXs="6"
          nzSm="6"
          nzMd="5"
          nzLg="6"
          nzXl="6"
          class="advert-cards__rightContent"
        >
          <div nz-row>
            <div nz-col nzSpan="24">
              <div nz-row [nzGutter]="[0, 12]">
                <div [ngSwitch]="advert.status">
                  <ng-container *ngSwitchCase="AdvertisementStatus.STATUS_NEW">
                    <div nz-col nzSpan="24">
                      <div nz-row [nzGutter]="[8, 0]">
                        <div nz-col>
                          <img src="./assets/images/view-outline.svg" alt="" />
                        </div>
                        <div class="advert-cards__rightContent__text" nz-col>
                          <span>Объявление на модерации</span>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container
                    *ngSwitchCase="AdvertisementStatus.STATUS_CONFIRMED"
                  >
                    <div nz-col nzXs="24" nzSm="24" nzMd="24" nzLg="0" nzXl="0">
                      <i
                        nz-icon
                        nz-popover
                        [nzPopoverContent]="contentTemplate"
                        nzPopoverPlacement="bottomRight"
                        nzPopoverTrigger="click"
                      >
                        <img src="/assets/images/top-button.png" alt="" />
                      </i>
                    </div>
                    <div nz-col nzXs="24" nzSm="24" nzMd="0" nzLg="0" nzXl="0">
                      <i nz-icon nzPopoverTrigger="click">
                        <img
                          src="../../../../../../assets/images/top-button_without_text.png"
                          alt=""
                        />
                      </i>
                    </div>

                    <div nz-col>
                      <div nz-row [nzGutter]="[8, 0]">
                        <div
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="12"
                          nzLg="12"
                          nzXl="3"
                        >
                          <img
                            src="./assets/images/o'zimizniki-Vector (2).png"
                            alt=""
                          />
                        </div>
                        <div
                          class="advert-cards__rightContent__text"
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="12"
                          nzLg="12"
                          nzXl="4"
                        >
                          <span>352</span>
                        </div>

                        <div
                          class="advert-cards__rightContent__text"
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="0"
                          nzLg="0"
                          nzXl="17"
                        >
                          <span>просмотров</span>
                        </div>
                      </div>
                    </div>
                    <div nz-col>
                      <div nz-row [nzGutter]="[12, 0]">
                        <div
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="12"
                          nzLg="12"
                          nzXl="3"
                        >
                          <img
                            src="./assets/images/o'zimizniki-Vector1.png"
                            alt=""
                          />
                        </div>
                        <div
                          class="advert-cards__rightContent__text"
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="12"
                          nzLg="12"
                          nzXl="3"
                        >
                          <span>25</span>
                        </div>
                        <div
                          class="advert-cards__rightContent__text"
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="0"
                          nzLg="0"
                          nzXl="18"
                        >
                          <span>добавили в Избранное</span>
                        </div>
                      </div>
                    </div>
                    <div nz-col>
                      <div nz-row [nzGutter]="[8, 0]">
                        <div
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="12"
                          nzLg="12"
                          nzXl="3"
                        >
                          <img
                            src="./assets/images/o'zimizniki-phone.png"
                            alt=""
                          />
                        </div>
                        <div
                          class="advert-cards__rightContent__text"
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="12"
                          nzLg="12"
                          nzXl="3"
                        >
                          <span>16</span>
                        </div>
                        <div
                          class="advert-cards__rightContent__text"
                          nz-col
                          nzXs="0"
                          nzSm="0"
                          nzMd="0"
                          nzLg="0"
                          nzXl="18"
                        >
                          <span>нажали на Позвонить</span>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container
                    *ngSwitchCase="AdvertisementStatus.STATUS_ARCHIVED"
                  >
                    <div nz-col nzSpan="24">
                      <div nz-row [nzGutter]="[8, 0]">
                        <div nz-col>
                          <img src="./assets/images/archive-dark.png" alt="" />
                        </div>
                        <div class="advert-cards__rightContent__text" nz-col>
                          <span>В архиве с 10.02.2022</span>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                  <ng-container
                    *ngSwitchCase="AdvertisementStatus.STATUS_REJECTED"
                  >
                    <div nz-col nzSpan="24">
                      <div nz-row [nzGutter]="[8, 0]">
                        <div nz-col>
                          <img src="./assets/images/block-red.svg" alt="" />
                        </div>
                        <div class="advert-cards__rightContent__text" nz-col>
                          <span>Объявление отклонено</span>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                  <div *ngSwitchDefault></div>
                </div>
              </div>
            </div>

            <div
              nz-col
              nzXs="0"
              nzSm="0"
              nzMd="0"
              nzLg="24"
              nzXl="24"
              class="advert-cards__rightContent__bottom"
            >
              <div nz-row [nzGutter]="[10, 0]">
                <div
                  nz-col
                  *ngIf="advert.status === AdvertisementStatus.STATUS_REJECTED"
                >
                  <button>
                    <img src="./assets/images/info.svg" alt="" />
                  </button>
                </div>
                <div nz-col>
                  <button>
                    <img
                      src="./assets/images/o'zimizniki-Vector (2).png"
                      alt=""
                    />
                  </button>
                </div>
                <div nz-col>
                  <button
                    [routerLink]="['../../../advertisement', 'edit', advert.id]"
                  >
                    <img src="./assets/images/o'zimizniki-edit.png" alt="" />
                  </button>
                </div>
                <div
                  nz-col
                  *ngIf="advert.status === AdvertisementStatus.STATUS_CONFIRMED"
                >
                  <button>
                    <img src="./assets/images/archive-dark.png" alt="" />
                  </button>
                </div>
                <div
                  nz-col
                  *ngIf="advert.status === AdvertisementStatus.STATUS_ARCHIVED"
                >
                  <button>
                    <img src="./assets/images/on.svg" alt="" />
                  </button>
                </div>
                <div
                  nz-col
                  *ngIf="
                    advert.status === AdvertisementStatus.STATUS_ARCHIVED ||
                    advert.status === AdvertisementStatus.STATUS_REJECTED
                  "
                >
                  <button>
                    <img src="./assets/images/trash.svg" alt="" />
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <ng-template #contentTemplate>
      <div class="popover">
        <div nz-row [nzGutter]="[0, 5]">
          <div nz-col nzSpan="24" class="popover__content">
            <div class="popover__content__item">
              <div nz-row>
                <div nz-col nzSpan="4">
                  <img
                    src="../../../../../../../../assets/images/archive.png"
                    alt=""
                  />
                </div>
                <div nz-col nzSpan="20">
                  <p>Архивировать</p>
                </div>
              </div>
            </div>
          </div>
          <div nz-col nzSpan="24" class="popover__content">
            <div class="popover__content__item">
              <div nz-row>
                <div nz-col nzSpan="4">
                  <img
                    src="../../../../../../../../assets/images/bookmark.png"
                    alt=""
                  />
                </div>
                <div nz-col nzSpan="20">
                  <p>Сохранить</p>
                </div>
              </div>
            </div>
          </div>
          <div nz-col nzSpan="24" class="popover__content">
            <div class="popover__content__item">
              <div nz-row>
                <div nz-col nzSpan="4">
                  <img
                    src="../../../../../../../../assets/images/block.png"
                    alt=""
                  />
                </div>
                <div nz-col nzSpan="20">
                  <p>Заблокировать</p>
                </div>
              </div>
            </div>
          </div>
          <div nz-col nzSpan="24" class="popover__content">
            <div class="popover__content__item">
              <div nz-row>
                <div nz-col nzSpan="4">
                  <img
                    src="../../../../../../../../assets/images/unlock.png"
                    alt=""
                  />
                </div>
                <div nz-col nzSpan="20">
                  <p>Разблокировать</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>

    <div nz-col nzSpan="24">
      <az-pagination
        [pageSize]="pageSize"
        [total]="data.total"
        [pageIndex]="query.pageIndex"
        (pageIndexChange)="paginate($event)"
      ></az-pagination>
    </div>
  </ng-container>
</div>
